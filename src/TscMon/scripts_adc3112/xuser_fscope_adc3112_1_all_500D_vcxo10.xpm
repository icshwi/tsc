#*****************************************************************#
#                    XprsMon Script file                          #
#                XUSER FASTSCOPE (2x ADC_3112)                    #
#   Title : xuser_fscope_adc3112_2_all_500d_VCXO10.xpm            #
#   Description  : ADS5409 data acquisition 500Msps -> SY89297U   #
#   Author       : J. Bovier / J-L Bolli                          #
#*****************************************************************#
# Version 0.1 16-01-2015 : Initial version ifC_1410/1211          #
#*****************************************************************#
# Check if FMC2 ADC_3112 is present + Signature OK
cr.ws 1200 31120201 FFFFFFFF                     # Check ADC_3112 SIGN_CSR (Type, Version, Revision)                                  
cr.ws 1204 20000000 FF000000                     # Check ADC_3112 MAIN_CSR (options instantiated)
#
pr.ws 1200 31120000                             # Enable FMC physical interface (out of tri-state)
# ------------------------------------------------------
# Board RESET pulse
# ------------------------------------------------------
pr.ws 1204 00000130
$usleep 2000
pr.ws 1204 00000030
adc3112.1 ads01 write 0 8000                     # ADS5409_R00 4 Wire SPI + no filter
adc3112.1 ads23 write 0 8000                     # ADS5409_R00 4 Wire SPI + no filter
# ------------------------------------------------------
# Initialize the LMK4803 clock synthetizer
# ------------------------------------------------------
@xuser_fscope_adc3112_1_lmkinit_ext10M_500M_vcxo.xpm               
$usleep 2000
# ------------------------------------------------------
# Initialize the ADC5409 devices
# ------------------------------------------------------
@xuser_fscope_adc3112_1_ads5409_init.xpm
$usleep 2000
# ------------------------------------------------------
# Initialize the SY89297 Pgm Delay
# ------------------------------------------------------
adc3112.1 sy write 0 00530053                # Write delay ADC23 83 taps /  ADC01 83 taps /       83 taps = 83 x 5ps = 415ps
pr.ws 1204 30                                # Enable Clock delay path for ADC Channel 01 + 23
$usleep 2000
# 
# ------------------------------------------------------
# Initialize the on-board ADS5409 ISERDES
# ------------------------------------------------------
adc3112.1 xratrig write 2 60                 # XRA1404 OCR ITL_ENABLE = 1 -> ADC Enabled  
$usleep 2000
pr.ws 1204 00004030
cr.ws 1204 00000000 00008000                 # Check MMCM is un-locked (MCMM RESET)    
pr.ws 1204 00000030
$usleep 2000 
cr.ws 1204 00008000 00008000                 # Check MMCM is locked on ADS5409 channel_0
pr.ws 1204 000040f0                          # RESET ISERDES ADS5409
pr.ws 1204 00000030                          # RESET ISERDES ADS5409
$usleep 2000
pr.ws 1220 00004000                          # Set default HW digital correction Channel_0
pr.ws 1224 00004000                          #                                   Channel_1
pr.ws 1228 00004000                          #                                   Channel_2
pr.ws 122c 00004000                          #                                   Channel_3
#                             
# ------------------------------------------------------
# Calibration ADS5409 ISERDES
# ------------------------------------------------------
adc3112.1 ads0123 calib                      # ADS5409 Calibration Mode with calculated value (Adjust to calculated mean)
$usleep 2000
#
# ------------------------------------------------------------------------------------
# Initialize Front-end INPUT
# ------------------------------------------------------------------------------------
#adc3112.1 xra01 write 2 55                   # XRA1404 OCR    Grounded ADC inputs
#adc3112.1 xra23 write 2 55                   # XRA1404 OCR    Grounded ADC inputs    
#adc3112.1 xra01 write 2 22                   # XRA1404 OCR    SE Pos input   
#adc3112.1 xra23 write 2 22                   # XRA1404 OCR    SE Pos input   
#adc3112.1 xra01 write 2 EE                   # XRA1404 OCR    SE Neg input   
#adc3112.1 xra23 write 2 EE                   # XRA1404 OCR    SE Neg input  
# ------------------------------------------------------------------------------------ 
adc3112.1 xra01 write 2 22                   
adc3112.1 xra23 write 2 22                   
#                             
# ------------------------------------------------------
# Patch ADC5409 SYNC_OUT work around
# ------------------------------------------------------
adc3112.1 lmk write b 37610000                   # LMK04803B_R11 Device MODE=0x6 + SYNC Enable  + NO_SYNC_CLKoutX_Y = 110110  SYNC_EN_AUTO = 0   clk_OUT0/clk_OUT6 forced '0'   q
$usleep 2000
adc3112.1 lmk write 0 00141000                   # LMK04803B_R00 Enable  ClkOut_01   + ClkOUT01_DIV = 128 ADS5409 23 SYNC  / TRIG_Calibration     15.625 MHz
adc3112.1 lmk write 1 00140080                   # LMK04803B_R01 Enable  ClkOut_23   + ClkOUT23_DIV = 4   FMC_CLK0_M2C     / ADS5409 01 CLKIN_DEL 500 MHz
adc3112.1 lmk write 2 00140080                   # LMK04803B_R02 Enable  ClkOut_45   + ClkOUT45_DIV = 4   FMC_LA_32        / ADS5409 23 CLKIN_DEL 500 MHz
adc3112.1 lmk write 3 00181000                   # LMK04803B_R03 Enable  ClkOut_67   + ClkOUT67_DIV = 128 ADS5409 01 SYNC  / Not used             15.625 MHz
adc3112.1 lmk write 4 00140080                   # LMK04803B_R04 Enable  ClkOut_89   + ClkOUT89_DIV = 4   ADS5409 01 CLKIN / Not used             500 MHz
adc3112.1 lmk write 5 00180080                   # LMK04803B_R05 Enable  ClkOut_1011 + ClkOUT1011_DIV = 4 Not used         / ADS5409 23 CLKIN     500 MHz
$usleep 2000
adc3112.1 ads01 write 1 8203                     # ADS5409_R01 CHA&B Corr EN + 2's complement + SYNCOUT disable + HP Mode 1
adc3112.1 ads23 write 1 8203                     # ADS5409_R01 CHA&B Corr EN + 2's complement + SYNCOUT disable + HP Mode 1
#adc3112.1 ads23 write 3 4b18                     # ADS5409 
#adc3112.1 ads23 write 1a 4b18                    # ADS5409 
$usleep 2000
#adc3112.1 ads23 write 3 4b18                     # ADS5409 
#adc3112.1 ads23 write 1a 4b18                    # ADS5409 
adc3112.1 ads23 write 1 0007                     # ADS5409_R01 CHA&B Corr EN + 2's complement + SYNCOUT enable + HP Mode 1   
adc3112.1 ads01 write 1 0007                     # ADS5409_R01 CHA&B Corr EN + 2's complement + SYNCOUT enable + HP Mode 1
adc3112.1 lmk write b 37600000                   # LMK04803B_R11 Device MODE=0x6 + SYNC Enable  + NO_SYNC_CLKoutX_Y = 110110  SYNC_EN_AUTO = 0   clk_OUT0/clk_OUT6 running      
$usleep 10000
#
$echo *************************************************************************************************
$echo **  ADC_3112 Data acquisition Standard mode Channel_0_NEG      **
$echo *****************************************************************
$echo **  Generator Agilent N51711B 25 MHz/8dBm + Splitter 2.1       **
$echo **  SIN 25_MHz shall be available at IN_0 NEG                  **
$echo *****************************************************************
$usleep 2000 
wait 100
adc3112.1 xratrig write 2 60                     # XRA1404 OCR ITL_ENABLE = 1  -> ADC Enabled  
adc3112.1 xra01 write 2 5E                       # ADC Input 10 Conditionner mode  GND - NEG 
adc3112.1 xra23 write 2 55                       # ADC Input 10 Conditionner mode  GND - GND
#  
fu1.w 100000..13ffff 0                           # FASTSCOPE fill the SRAM buffer with 0x0000,0000 
# Data acquisition with Manual Trigger
pr.ws 11c0 80040001                              # FASTSCOPE ABORT/stop previous acquisition SRAM1 (in case of..))
pr.ws 11c4 0                                     # FASTSCOPE DEFINE trigger mode = Manual
pr.ws 11c0 40040001                              # FASTSCOPE ARM data acquisition SRAM1
$usleep 2000                                     # FASTSCOPE WAIT for 2 ms
pr.ws 11c8 40000000                              # FASTSCOPE TRIGGER  command
$echo   --- ADS5409 Channel (02) data acquisition started
$usleep 2000                    
cr.ws 11c0 30040001 30000000                     # FASTSCOPE CHECK end of acquisition
#
#$echo     FASTSCOPE Buffer data print-out for debugging
#du1.hs 112000..112100           # Channel_0  
#  
$echo *****************************************************************
$echo     FASTSCOPE Standard Buffer SAVE to files
$echo *****************************************************************
adc3112.1 ads01 save0 d:datatst/adc3112_500D_0_NEG_acq_data            # Save acquisition  DPRAM_Buffer_0 -> file.cvs
#
$echo *************************************************************************************************
$echo **  ADC_3112 Data acquisition Standard mode Channel_0_POS      **
$echo *****************************************************************
$echo **  Generator Agilent N51711B 25 MHz/8dBm + Splitter 2.1       **
$echo **  SIN 25_MHz shall be available at IN_0 POS                  **
$echo *****************************************************************
$usleep 2000 
wait 100
adc3112.1 xratrig write 2 60                     # XRA1404 OCR ITL_ENABLE = 1  -> ADC Enabled  
adc3112.1 xra01 write 2 52                       # ADC Input 10 Conditionner mode  GND - POS 
adc3112.1 xra23 write 2 55                       # ADC Input 10 Conditionner mode  GND - GND
#  
fu1.w 100000..13ffff 0                           # FASTSCOPE fill the SRAM buffer with 0x0000,0000 
# Data acquisition with Manual Trigger
pr.ws 11c0 80040001                              # FASTSCOPE ABORT/stop previous acquisition SRAM1 (in case of..))
pr.ws 11c4 0                                     # FASTSCOPE DEFINE trigger mode = Manual
pr.ws 11c0 40040001                              # FASTSCOPE ARM data acquisition SRAM1
$usleep 2000                                     # FASTSCOPE WAIT for 2 ms
pr.ws 11c8 40000000                              # FASTSCOPE TRIGGER  command
$echo   --- ADS5409 Channel (02) data acquisition started
$usleep 2000                    
cr.ws 11c0 30040001 30000000                     # FASTSCOPE CHECK end of acquisition
#
#$echo     FASTSCOPE Buffer data print-out for debugging
du1.hs 101F00..106100           # Channel_0  
#  
$echo *****************************************************************
$echo     FASTSCOPE Standard Buffer SAVE to files
$echo *****************************************************************
adc3112.1 ads01 save0 d:datatst/adc3112_500D_0_POS_acq_data            # Save acquisition DPRAM_Buffer_0 -> file.cvs
#
$echo *************************************************************************************************
$echo **  ADC_3112 Data acquisition Standard mode Channel_1_NEG      **
$echo *****************************************************************
$echo **  Generator Agilent N51711B 25 MHz/8dBm + Splitter 2.1       **
$echo **  SIN 25_MHz shall be available at IN_1 NEG                  **
$echo *****************************************************************
$usleep 2000 
wait 100
adc3112.1 xratrig write 2 60                     # XRA1404 OCR ITL_ENABLE = 1   -> ADC Enabled 
adc3112.1 xra01 write 2 E5                       # ADC Input 10 Conditionner mode  NEG - GND 
adc3112.1 xra23 write 2 55                       # ADC Input 23 Conditionner mode  GND - GND
#  
fu1.w 100000..13ffff 0                           # FASTSCOPE fill the SRAM buffer with 0x0000,0000 
# Data acquisition with Manual Trigger
pr.ws 11c0 80040001                              # FASTSCOPE ABORT/stop previous acquisition SRAM1 (in case of..))
pr.ws 11c4 0                                     # FASTSCOPE DEFINE trigger mode = Manual
pr.ws 11c0 40040001                              # FASTSCOPE ARM data acquisition SRAM1
$usleep 2000                                     # FASTSCOPE WAIT for 2 ms
pr.ws 11c8 40000000                              # FASTSCOPE TRIGGER  command
$echo   --- ADS5409 Channel (02) data acquisition started
$usleep 2000                    
cr.ws 11c0 30040001 30000000                     # FASTSCOPE CHECK end of acquisition
#
#$echo     FASTSCOPE Buffer data print-out for debugging
#du1.hs 112000..112100           # Channel_1  
#  
$echo *****************************************************************
$echo     FASTSCOPE Standard Buffer SAVE to files
$echo *****************************************************************
adc3112.1 ads01 save1 d:datatst/adc3112_500D_1_NEG_acq_data            # Save acquisition  DPRAM_Buffer_1 -> file.cvs
#
#
$echo *************************************************************************************************
$echo **  ADC_3112 Data acquisition Standard mode Channel_1_POS      **
$echo *****************************************************************
$echo **  Generator Agilent N51711B 25 MHz/8dBm + Splitter 2.1       **
$echo **  SIN 25_MHz shall be available at IN_1 POS                  **
$echo *****************************************************************
$usleep 2000 
wait 100
adc3112.1 xratrig write 2 60                     # XRA1404 OCR ITL_ENABLE = 0   -> ADC Enabled 
adc3112.1 xra01 write 2 25                       # ADC Input 10 Conditionner mode  POS - GND 
adc3112.1 xra23 write 2 55                       # ADC Input 23 Conditionner mode  GND - GND
#  
fu1.w 100000..13ffff 0                           # FASTSCOPE fill the SRAM buffer with 0x0000,0000 
#  
fu1.w 100000..13ffff 0                           # FASTSCOPE fill the SRAM buffer with 0x0000,0000 
# Data acquisition with Manual Trigger
pr.ws 11c0 80040001                              # FASTSCOPE ABORT/stop previous acquisition SRAM1 (in case of..))
pr.ws 11c4 0                                     # FASTSCOPE DEFINE trigger mode = Manual
pr.ws 11c0 40040001                              # FASTSCOPE ARM data acquisition SRAM1
$usleep 2000                                     # FASTSCOPE WAIT for 2 ms
pr.ws 11c8 40000000                              # FASTSCOPE TRIGGER  command
$echo   --- ADS5409 Channel (02) data acquisition started
$usleep 2000                    
cr.ws 11c0 30040001 30000000                     # FASTSCOPE CHECK end of acquisition
#
#$echo     FASTSCOPE Buffer data print-out for debugging
#du1.hs 112000..112100            # Channel_1  
#  
$echo *****************************************************************
$echo     FASTSCOPE Standard Buffer SAVE to files
$echo *****************************************************************
adc3112.1 ads01 save1 d:datatst/adc3112_500D_1_POS_acq_data            # Save acquisition  DPRAM_Buffer_1 -> file.cvs
#
$echo *************************************************************************************************
$echo **  ADC_3112 Data acquisition Interleaved mode Channel_0       **
$echo *****************************************************************
$echo **  Generator Agilent N51711B 25 MHz/8dBm + Splitter 2.1       **
$echo **  SIN 25_MHz shall be available at IN_1 POS (Channel_02)     **
$echo *****************************************************************
$usleep 2000
wait 100
#
dr.ws 1220..1330                                 # ADC3112 digital correction parameter
#
adc3112.1 xratrig write 2 e0                     # XRA1404 OCR ITL_ENABLE = 1  -> ADC Enabled  
adc3112.1 xra01 write 2 22                       # ADC Input 10 Conditionner mode  POS - POS              
adc3112.1 xra23 write 2 22                       # ADC Input 23 Conditionner mode  POS - POS              
#  
fu1.w 100000..13ffff 0                           # FASTSCOPE fill the SRAM buffer with 0x0000,0000 
# Data acquisition with Manual Trigger
pr.ws 11c0 80040001                              # FASTSCOPE ABORT/stop previous acquisition SRAM1 (in case of..))
pr.ws 11c4 0                                     # FASTSCOPE DEFINE trigger mode = Manual
pr.ws 11c0 40040001                              # FASTSCOPE ARM data acquisition SRAM1
$usleep 2000                                     # FASTSCOPE WAIT for 2 ms
pr.ws 11c8 40000000                              # FASTSCOPE TRIGGER  command
$echo   --- ADS5409 Channel (02) data acquisition started
$usleep 2000                    
cr.ws 11c0 30040001 30000000                     # FASTSCOPE CHECK end of acquisition
#
#$echo     FASTSCOPE Buffer data print-out for debugging
#du1.hs 102000..102100                            # Channel_0 A  
#du1.hs 122000..122100                            # Channel_0 B
#  
#$echo *****************************************************************
$echo     FASTSCOPE Interleaved Buffer SAVE to files
#$echo *****************************************************************
adc3112.1 ads01 save0 d:datatst/adc3112_500D_0A_ITL_acq_data            # Save acquisition DPRAM_Buffer_0 -> file.cvs
adc3112.1 ads01 save2 d:datatst/adc3112_500D_0B_ITL_acq_data            # Save acquisition DPRAM_Buffer_2 -> file.cvs
adc3112.1 ads1 itl buf d:datatst/adc3112_500D_0AB_ITL_acq_data          # Save acquisition DPRAM_Buffer_0+2 realligned -> file.cvs
#
$echo *************************************************************************************************
$echo **  ADC_3112 Data acquisition Interleaved mode Channel_1       **
$echo *****************************************************************
$echo **  Generator Agilent N51711B 25 MHz/8dBm + Splitter 2.1       **
$echo **  SIN 25_MHz shall be available at IN_2 NEG (Channel_02)     **
$echo *****************************************************************
$usleep 2000
wait 100 
#
adc3112.1 xratrig write 2 e0                     # XRA1404 OCR ITL_ENABLE = 1  -> ADC Enabled  
adc3112.1 xra01 write 2 22                       # ADC Input 10 Conditionner mode  POS - POS              
adc3112.1 xra23 write 2 22                       # ADC Input 23 Conditionner mode  POS - POS              
#  
fu1.w 100000..13ffff 0                           # FASTSCOPE fill the SRAM buffer with 0x0000,0000 
# Data acquisition with Manual Trigger
pr.ws 11c0 80040001                              # FASTSCOPE ABORT/stop previous acquisition SRAM1 (in case of..))
pr.ws 11c4 0                                     # FASTSCOPE DEFINE trigger mode = Manual
pr.ws 11c0 40040001                              # FASTSCOPE ARM data acquisition SRAM1
$usleep 2000                                     # FASTSCOPE WAIT for 2 ms
pr.ws 11c8 40000000                              # FASTSCOPE TRIGGER  command
$echo   --- ADS5409 Channel (02) data acquisition started
$usleep 2000                    
cr.ws 11c0 30040001 30000000                     # FASTSCOPE CHECK end of acquisition
#
#$echo     FASTSCOPE Buffer data print-out for debugging
#du1.hs 112000..112100           # Channel_0  
#du1.hs 132000..132100           # Channel_0  
#$echo *****************************************************************
$echo     FASTSCOPE Interleaved Buffer SAVE to files
#$echo *****************************************************************
adc3112.1 ads01 save1 d:datatst/adc3112_500D_1A_ITL_acq_data            # Save acquisition DPRAM_Buffer_1 -> file.cvs
adc3112.1 ads01 save3 d:datatst/adc3112_500D_1B_ITL_acq_data            # Save acquisition DPRAM_Buffer_3 -> file.cvs
adc3112.1 ads2 itl buf d:datatst/adc3112_500D_1AB_ITL_acq_data          # Save acquisition DPRAM_Buffer_0+2 realligned -> file.cvs
#
$echo *************************************************************************************************
$echo **  ADC_3112 Data acquisition Standard mode Channel_2_NEG      **
$echo *****************************************************************
$echo **  Generator Agilent N51711B 25 MHz/8dBm + Splitter 2.1       **
$echo **  SIN 25_MHz shall be available at IN_2 NEG                  **
$echo *****************************************************************
wait 100
# 
adc3112.1 xratrig write 2 60                     # XRA1404 OCR ITL_ENABLE = 1  -> ADC Enabled 
adc3112.1 xra01 write 2 55                       # ADC Input 10 Conditionner mode  GND - GND              
adc3112.1 xra23 write 2 ee                       # ADC Input 23 Conditionner mode  NEG - NEG              
#  
fu1.w 100000..13ffff 0                           # FASTSCOPE fill the SRAM buffer with 0x0000,0000 
# Data acquisition with Manual Trigger
pr.ws 11c0 80040001                              # FASTSCOPE ABORT/stop previous acquisition SRAM1 (in case of..))
pr.ws 11c4 0                                     # FASTSCOPE DEFINE trigger mode = Manual
pr.ws 11c0 40040001                              # FASTSCOPE ARM data acquisition SRAM1
$usleep 2000                                     # FASTSCOPE WAIT for 2 ms
pr.ws 11c8 40000000                              # FASTSCOPE TRIGGER  command
$echo   --- ADS5409 Channel (02) data acquisition started
$usleep 2000                    
cr.ws 11c0 30040001 30000000                     # FASTSCOPE CHECK end of acquisition
#
#$echo     FASTSCOPE Buffer data print-out for debugging
#du1.hs 102000..102100           # Channel_0  
$echo *****************************************************************
$echo     FASTSCOPE Standard Buffer SAVE to files
$echo *****************************************************************
adc3112.1 ads01 save2 d:datatst/adc3112_500D_2_NEG_acq_data            # Save acquisition  DPRAM_Buffer_2 -> file.cvs
#
$echo *************************************************************************************************
$echo **  ADC_3112 Data acquisition Standard mode Channel_2_POS      **
$echo *****************************************************************
$echo **  Generator Agilent N51711B 25 MHz/8dBm + Splitter 2.1       **
$echo **  SIN 25_MHz shall be available at IN_2 POS                  **
$echo *****************************************************************
$usleep 2000 
wait 100
# 
adc3112.1 xratrig write 2 60                     # XRA1404 OCR ITL_ENABLE = 1  -> ADC Enabled  
adc3112.1 xra01 write 2 55                       # ADC Input 10 Conditionner mode  GND - GND              
adc3112.1 xra23 write 2 22                       # ADC Input 23 Conditionner mode  POS - POS              
#  
fu1.w 100000..13ffff 0                           # FASTSCOPE fill the SRAM buffer with 0x0000,0000 
# Data acquisition with Manual Trigger
pr.ws 11c0 80040001                              # FASTSCOPE ABORT/stop previous acquisition SRAM1 (in case of..))
pr.ws 11c4 0                                     # FASTSCOPE DEFINE trigger mode = Manual
pr.ws 11c0 40040001                              # FASTSCOPE ARM data acquisition SRAM1
$usleep 2000                                     # FASTSCOPE WAIT for 2 ms
pr.ws 11c8 40000000                              # FASTSCOPE TRIGGER  command
$echo   --- ADS5409 Channel (02) data acquisition started
$usleep 2000                    
cr.ws 11c0 30040001 30000000                     # FASTSCOPE CHECK end of acquisition
#
#$echo     FASTSCOPE Buffer data print-out for debugging
#du1.hs 102000..102100           # Channel_0  
$echo *****************************************************************
$echo     FASTSCOPE Standard Buffer SAVE to files
$echo *****************************************************************
adc3112.1 ads01 save2 d:datatst/adc3112_500D_2_POS_acq_data            # Save acquisition  DPRAM_Buffer_2 -> file.cvs
#
#
$echo *************************************************************************************************
$echo **  ADC_3112 Data acquisition Standard mode Channel_3_NEG      **
$echo *****************************************************************
$echo **  Generator Agilent N51711B 25 MHz/8dBm + Splitter 2.1       **
$echo **  SIN 25_MHz shall be available at IN_3 NEG                  **
$echo *****************************************************************
$usleep 2000 
wait 100
# 
adc3112.1 xratrig write 2 60                     # XRA1404 OCR ITL_ENABLE = 1  -> ADC Enabled  
adc3112.1 xra01 write 2 55                       # ADC Input 10 Conditionner mode  GND - GND                            
adc3112.1 xra23 write 2 ee                       # ADC Input 23 Conditionner mode  NEG - NEG              
#  
fu1.w 100000..13ffff 0          # FASTSCOPE fill the SRAM buffer with 0x0000,0000 
# Data acquisition with Manual Trigger
pr.ws 11c0 80040001                              # FASTSCOPE ABORT/stop previous acquisition SRAM1 (in case of..))
pr.ws 11c4 0                                     # FASTSCOPE DEFINE trigger mode = Manual
pr.ws 11c0 40040001                              # FASTSCOPE ARM data acquisition SRAM1
$usleep 2000                                     # FASTSCOPE WAIT for 2 ms
pr.ws 11c8 40000000                              # FASTSCOPE TRIGGER  command
$echo   --- ADS5409 Channel (02) data acquisition started
$usleep 2000                    
cr.ws 11c0 30040001 30000000                     # FASTSCOPE CHECK end of acquisition
#
#$echo     FASTSCOPE Buffer data print-out for debugging
#du1.hs 102000..102100           # Channel_0  
$echo *****************************************************************
$echo     FASTSCOPE Standard Buffer SAVE to files
$echo *****************************************************************
adc3112.1 ads01 save3 d:datatst/adc3112_500D_3_NEG_acq_data            # Save acquisition  DPRAM_Buffer_3 -> file.cvs
#
$echo *************************************************************************************************
$echo **  ADC_3112 Data acquisition Standard mode Channel_3_POS      **
$echo *****************************************************************
$echo **  Generator Agilent N51711B 25 MHz/8dBm + Splitter 2.1       **
$echo **  SIN 25_MHz shall be available at IN_3 POS                  **
$echo *****************************************************************
$usleep 2000 
wait 100
# 
adc3112.1 xratrig write 2 60                     # XRA1404 OCR ITL_ENABLE = 1   -> ADC Enabled 
adc3112.1 xra01 write 2 55                       # ADC Input 10 Conditionner mode  GND - GND              
adc3112.1 xra23 write 2 22                       # ADC Input 23 Conditionner mode  POS - POS              
#  
fu1.w 100000..13ffff 0          # FASTSCOPE fill the SRAM buffer with 0x0000,0000 
# Data acquisition with Manual Trigger
pr.ws 11c0 80040001                              # FASTSCOPE ABORT/stop previous acquisition SRAM1 (in case of..))
pr.ws 11c4 0                                     # FASTSCOPE DEFINE trigger mode = Manual
pr.ws 11c0 40040001                              # FASTSCOPE ARM data acquisition SRAM1
$usleep 2000                                     # FASTSCOPE WAIT for 2 ms
pr.ws 11c8 40000000                              # FASTSCOPE TRIGGER  command
$echo   --- ADS5409 Channel (02) data acquisition started
$usleep 2000                    
cr.ws 11c0 30040001 30000000                     # FASTSCOPE CHECK end of acquisition
#
#$echo     FASTSCOPE Buffer data print-out for debugging
#du1.hs 102000..102100           # Channel_0  
$echo *****************************************************************
$echo     FASTSCOPE Standard Buffer SAVE to files
$echo *****************************************************************
adc3112.1 ads01 save3 d:datatst/adc3112_500D_3_POS_acq_data            # Save acquisition  DPRAM_Buffer_3 -> file.cvs
#
#
adc3112.1 ads01 temp
adc3112.1 ads23 temp
adc3112.1 xratrig write 2 20                    # XRA1404 OCR    ADC_ENABLE = 0  -> ADS5409 disabled
pr.ws 1204 0                                    # Disable  Clock delay path for ADC Channel 01 + 23
$echo *****************************************************************
$echo     FASTSCOPE basic data acquisition terminated
$echo *****************************************************************


